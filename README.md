Ανάπτυξη Λογισμικού για Αλγοριθμικά Προβλήματα Project 2 Βορλόου Φώτιος 1115201900026 Καραμήτρος Βάιος 1115201900073 Github link : https://github.com/fotisvor/Project-2 Το πρόγραμμα αποτελείται από δύο τμήματα, Α και Β και έχει χτιστεί πάνω στην δομή του project της πρώτης εργασίας, ώστε να χρησιμοποιεί τις δομές που ορίστηκαν σε αυτό. Οδηγίες μεταγλώττισης: cd src -> cd lsh -> make
Οδηγίες εκτέλεσης:
./graph_search
d <input file> q <query file> k <int> L <int> R <int> N
<int>
l <int, only for Search on Graph> m <1 for GNNS, 2 for MRNG> ο <output file>
A: Υλοποιείται μια προσομοίωση Locality-Sensitive Hashing (LSH) για την κατά προσέγγιση αναζήτηση του πλησιέστερου γείτονα χρησιμοποιώντας ένα γράφημα k-NN. Ο αλγόριθμος LSH εφαρμόζεται σε ένα σύνολο δεδομένων και ο γράφος k-NN που προκύπτει χρησιμοποιείται για μια άπληστη αναζήτηση πλησιέστερου γείτονα (Greedy Nearest Neighbor Search - GNNS) για την εύρεση κατά προσέγγιση πλησιέστερων γειτόνων για δεδομένα query points. Δομή κώδικα 1. Λειτουργία visualizeGraph Σκοπός: Οπτικοποιεί τον γράφο k-NN γράφοντας τις πληροφορίες του γράφου σε ένα καθορισμένο αρχείο. Παράμετροι: knn_graph: Διάνυσμα 2D που αναπαριστά το γράφημα k-NN. filename: Όνομα του αρχείου για την αποθήκευση της οπτικοποίησης. Λεπτομέρειες:
Ανοίγει το αρχείο για εγγραφή και ελέγχει αν το αρχείο έχει ανοιχτεί επιτυχώς. Επαναλαμβάνει κάθε κόμβο του γράφου k-NN, εκτυπώνοντας τους γείτονές του και τις αντίστοιχες αποστάσεις στο αρχείο. Κλείνει το αρχείο μετά την ολοκλήρωση της οπτικοποίησης. 2. Συνάρτηση visualizeGnnsResults Σκοπός: Εμφανίζει τα αποτελέσματα της αναζήτησης GNNS, εμφανίζοντας τους δείκτες των κόμβων και τις αποστάσεις τους. Παράμετροι: gnns_results: Διάνυσμα ζευγών που αντιπροσωπεύουν τα αποτελέσματα της αναζήτησης GNNS. Λεπτομέρειες: Εκτυπώνει κάθε δείκτη κόμβου και την απόστασή του στo αρχείο. 3. Συνάρτηση gnnsSearch Σκοπός: Υλοποιεί τον αλγόριθμο Greedy Nearest Neighbor Search (GNNS). Παράμετροι: knn_graph: Διάνυσμα 2D που αναπαριστά το γράφημα k-NN. query: Διάνυσμα uint8_t που αναπαριστά το σημείο αναζήτησης. dataset: Διάνυσμα διανυσμάτων uint8_t που αντιπροσωπεύουν το σύνολο δεδομένων. Λεπτομέρειες: Μετατρέπει το ερώτημα και το σύνολο δεδομένων σε κατάλληλες δομές δεδομένων. Ορίζει σταθερές για τον αλγόριθμο GNNS (R: τυχαίες επανεκκινήσεις, T: άπληστα βήματα, L: σημεία προς επιστροφή). Εκτελεί πολλαπλές τυχαίες επανεκκινήσεις και άπληστα βήματα για την εύρεση κατά προσέγγιση πλησιέστερων γειτόνων. Ταξινομεί τα αποτελέσματα και επιστρέφει τα κορυφαία L σημεία.
4. Λειτουργία LSH_Simulation Σκοπός: Προσομοιώνει τον αλγόριθμο LSH για την κατά προσέγγιση αναζήτηση του πλησιέστερου γείτονα και τον ενσωματώνει στο GNNS. Παράμετροι: args: Αντικείμενο LSH_Args που περιέχει παραμέτρους εισόδου. Λεπτομέρειες: Διαβάζει το σύνολο δεδομένων από ένα αρχείο και δημιουργεί το γράφημα k-NN χρησιμοποιώντας τον LSH. Ζητάει επανειλημμένα από τον χρήστη αρχεία ερωτημάτων, εκτελεί αναζήτηση GNNS και οπτικοποιεί τα αποτελέσματα. Επιτρέπει στο χρήστη να συνεχίσει την προσομοίωση ή να εξέλθει. 5. Main Αναλύει τα ορίσματα της γραμμής εντολών ή ζητάει από τον χρήστη να εισάγει δεδομένα. Καλεί την LSH_Simulation με τα παρεχόμενα ορίσματα. Διαγράφει το δυναμικά δεσμευμένο αντικείμενο LSH_Args. Β: Ο κώδικας περιέχει μια υλοποίηση του αλγορίθμου MRNG για την εκτέλεση αναζήτησης σε εικόνες από το σύνολο δεδομένων MNIST. Ο MRNG κατασκευάζει αναπαράσταση γραφήματος του συνόλου δεδομένων χρησιμοποιώντας τυχαίες μονοτονικές σχετικές αποστάσεις μεταξύ των σημείων δεδομένων. Οι επακόλουθες αναζητήσεις διεξάγονται σε αυτόν τον γράφο για την αποτελεσματική εύρεση των πλησιέστερων γειτόνων. Λεπτομέρειες υλοποίησης Δομή MNISTImage Η δομή MNISTImage αναπαριστά μια εικόνα από το σύνολο δεδομένων MNIST, αποθηκεύοντας τιμές images ως χαρακτηριστικά. Δομή SearchResults Η δομή SearchResults χρησιμοποιείται για την αποθήκευση των αποτελεσμάτων μιας αναζήτησης, συμπεριλαμβανομένων των δεικτών, των
πραγματικών αποστάσεων, των προσεγγιστικών αποστάσεων και των συντελεστών προσέγγισης. Συνάρτηση calculateDistance Η συνάρτηση calculateDistance υπολογίζει την ευκλείδεια απόσταση μεταξύ δύο εικόνων MNIST. / για αλλη μετρική αλλάζουμε των κώδικα μέσα στη συνάρτηση approximateDistanceFunction Η approximateDistanceFunction είναι μια συνάρτηση για την προσέγγιση των αποστάσεων. Σε αυτή την υλοποίηση, καλεί απλώς την calculateDistance. constructMRNG Συνάρτηση Η constructMRNG κατασκευάζει το γράφο MRNG συνδέοντας κόμβους με βάση τυχαιοποιημένες μονοτονικές σχετικές αποστάσεις. Χρησιμοποιεί ένα καθορισμένο όριο υποψηφίων για τον έλεγχο του αριθμού των πιθανών γειτόνων. searchOnGraphWithDistances Συνάρτηση Η searchOnGraphWithDistances εκτελεί αναζήτηση στο γράφο και επιστρέφει τα αποτελέσματα της αναζήτησης, συμπεριλαμβανομένων των πραγματικών και των προσεγγιστικών αποστάσεων και των συντελεστών προσέγγισης. findNearestNeighborOnGraph Συνάρτηση Η findNearestNeighborOnGraph βρίσκει τον πλησιέστερο γείτονα στο γράφημα MRNG για ένα δεδομένο Επίσης ο κώδικας κατά την εκτέλεση του ενημερώνει τον χρήστη για τους χρόνους κατασκευής του γράφου και αναζήτησης και στο τέλος βάζει όλα τα αποτελέσματα σε ένα output.txt. Σχολιασμός Αποτελεσμάτων:
Γενικά παρατηρούμε ότι LSH ξεχωρίζει για την ταχύτητά του, ιδιαίτερα σε χώρους υψηλών διαστάσεων. Ο LSH υπερέχει σε σενάρια όπου η ταχύτητα είναι σημαντικότερη, καθιστώντας τον προτιμώμενη επιλογή για εφαρμογές όπου τα κατά προσέγγιση αποτελέσματα είναι αποδεκτά και η αποδοτικότητα είναι κρίσιμη.
Από την άλλη ο αλγόριθμος Hypercube Επιτυγχάνει ισορροπία μεταξύ ταχύτητας και ακρίβειας, παρέχοντας ένα καλά οργανωμένο πλαίσιο για γρήγορες αναζητήσεις πλησιέστερων γειτόνων. Ουσιαστικά ο Hypercube είναι η κατάλληλη επιλογή για εφαρμογές που απαιτούν μια ισσοροπία μεταξύ της γρήγορης ανάκτησης αποτελεσμάτων και μιας δομημένης, ισορροπημένης προσέγγισης
Τέλος το MRNG ακολουθεί μια ξεχωριστή προσέγγιση κατασκευάζοντας ένα τυχαιοποιημένο μονοτονικό γράφο γειτνίασης που βασίζεται σε τυχαίες μονοτονικές σχετικές αποστάσεις μεταξύ σημείων δεδομένων. Αυτό καθιστά το MRNG καλύτερο για όταν η ακρίβεια αποτελεί προτεραιότητα. Παρόλο που μπορεί να επιβαρυνθεί με κόστος κατασκευής όπως δηλαδή και στα tests όταν μεγάλωνε ο όγκος του Input το MRNG έκανε αισθητά περισσότερο χρόνο απο τα άλλα 2, το MRNG υπερέχει σε σενάρια όπου τα ακριβή αποτελέσματα αναζήτησης του πλησιέστερου γείτονα είναι σημαντικότερα από την ταχύτητα
Επίσης στο MRNG Παρατηρήσαμε ότι όσο περισσότερο αυξανόταν το -l είχαμε χειρότερους χρόνου (όπως είναι λογικό).
Κάτι ακόμα που παρατηρήθηκε είναι ότι στην περίπτωση του MRNG ακόμα και σε μεγάλα datasets όταν είχαμε μικρό -l ο χρόνο βελτιωνόταν σημαντικά και όσο πιο πολύ πλησίαζε στο query number αυξανόταν ανάλογα.
Τα περισσότερα tests έγιναν για αριθμό MNIST_Images 60.000 (~30 λεπτά LSH ~35+ Το cube και το MRNG μπορεί να έφτανε και τα 40+ ανάλογα το l) καθώς για τις 1000 εικόνες όλοι οι αλγόριθμοι παραήταν γρήγοροι και δεν θεωρήσαμε ότι είχαμε καλά αποτελέσματα. Τέλος, διενεργήσαμε μερικά τεστ στις 10 χιλιάδες εικόνες, κυρίως για αποσφαλμάτωση λαθών, αφού δεν παρατηρήσαμε σε αυτά τα αποτελέσματα οτιδήποτε αξιοσημείωτο
